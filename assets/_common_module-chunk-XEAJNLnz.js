var u=Object.defineProperty;var l=(s,t,a)=>t in s?u(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var i=(s,t,a)=>l(s,typeof t!="symbol"?t+"":t,a);import{v as c,I as o,z as _,B as h,C as p,D as b,E as f,F as n,G as d}from"./index-CwsdFOqf.js";function y(s,t){return new d(2100,!1)}class m{createSubscription(t,a,e){return n(()=>t.subscribe({next:a,error:e}))}dispose(t){n(()=>t.unsubscribe())}}class g{createSubscription(t,a,e){return t.then(r=>a?.(r),r=>e?.(r)),{unsubscribe:()=>{a=null,e=null}}}dispose(t){t.unsubscribe()}}const k=new g,S=new m;let E=(()=>{const t=class t{constructor(e){i(this,"_ref");i(this,"_latestValue",null);i(this,"markForCheckOnValueUpdate",!0);i(this,"_subscription",null);i(this,"_obj",null);i(this,"_strategy",null);i(this,"applicationErrorHandler",c(o));this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){if(!this._obj){if(e)try{this.markForCheckOnValueUpdate=!1,this._subscribe(e)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r),r=>this.applicationErrorHandler(r))}_selectStrategy(e){if(_(e))return k;if(h(e))return S;throw y()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};i(t,"ɵfac",function(r){return new(r||t)(p(b,16))}),i(t,"ɵpipe",f({name:"async",type:t,pure:!1}));let s=t;return s})();export{E as A};
